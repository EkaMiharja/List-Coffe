<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> Coffe List </title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <!-- CSS -->
  <link rel="stylesheet" href="style.css">

  <link rel="icon" type="image/png" href="favicon-32x32.png">


</head>
<body>
  <!-- Loader -->
<div id="loader" class="loader">
  <svg class="pl" width="240" height="240" viewBox="0 0 240 240">
    <circle class="pl__ring pl__ring--a" cx="120" cy="120" r="105" fill="none" stroke-width="20"
      stroke-dasharray="0 660" stroke-dashoffset="-330" stroke-linecap="round"></circle>
    <circle class="pl__ring pl__ring--b" cx="120" cy="120" r="35" fill="none" stroke-width="20"
      stroke-dasharray="0 220" stroke-dashoffset="-110" stroke-linecap="round"></circle>
    <circle class="pl__ring pl__ring--c" cx="85" cy="120" r="70" fill="none" stroke-width="20"
      stroke-dasharray="0 440" stroke-linecap="round"></circle>
    <circle class="pl__ring pl__ring--d" cx="155" cy="120" r="70" fill="none" stroke-width="20"
      stroke-dasharray="0 440" stroke-linecap="round"></circle>
  </svg>
</div>
  <!-- End Loader -->

  <!-- Wave Background -->
<div>
    <div class="wave"></div>
    <div class="wave"></div>
    <div class="wave"></div>
</div>
  <!--Wave Background End-->

  <!-- Navbar Bootstrap -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top shadow">
        <div class="container-fluid">
            <a class="navbar-brand fw-semibold" href="#">
                <i class="fa-solid fa-mug-hot me-2"></i> Coffee List
            </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" id="navToggle">
            <span class="navbar-toggler-icon"></span>
        </button>

            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="list.html">Daftar Kafe</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Tambah Data</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- End Navbar -->

  <!-- Form Container -->
  <div class="container">
    
    <!-- Title section -->
    <div class="title">Coffe List</div>
    <div class="content">
      <!-- Alert Notification -->
      <div id="alert-box"></div>
      <!-- Registration form -->
      <form name="list-coffe-form">
        <div class="user-details">
          <!-- Input for Kafe -->
          
          <div class="input-box">
            <span class="details">Nama Kafe</span>
            <input class="input" type="text" placeholder="Masukkan nama kafe" name="kafe" required>
          </div>
          <!-- Input for Lokasi -->
          <div class="input-box">
            <span class="details">Lokasi</span>
            <input class="input" type="text" placeholder="Masukkan Lokasi" name="lokasi" required>
          </div>
          <!-- Input for Link -->
          <div class="input-box">
            <span class="details">Link</span>
            <input class="input" type="text" placeholder="Masukkan Link" name="link" required>
          </div>
        </div>
        
        <div class="radio-inputs">
          <label class="radio">
            <input type="radio" name="kategori" value="Nugas"/>
            <span class="name">Nugas</span>
          </label>
          <label class="radio">
            <input type="radio" name="kategori" value="Lari"/>
            <span class="name">Lari</span>
          </label>
          <label class="radio">
            <input type="radio" name="kategori" value="Nongkrong"/>
            <span class="name">Nongkrong</span>
          </label>
        </div> 
        
        <!-- Submit button -->
        <div class="button">
          <button class="learn-more" type="submit" value="Register">Kirim</button>
        </div>
      </form>
    </div>
  </div>
  <!-- Form Container End -->
  
  <!-- JavaScript to handle form submission -->
  <script>
  const scriptURL = 'https://script.google.com/macros/s/AKfycbyjUDDgpP5n7YnNKRhwax4FJMThCUt6-XbIWKqhvJZbVNfQtEHoTmF9OStnPVKxWYCOkg/exec'
  const form = document.forms['list-coffe-form']
  const alertBox = document.getElementById('alert-box');

  form.addEventListener('submit', e => {
    e.preventDefault()
    // Tampilkan alert loading
    alertBox.innerHTML = `
      <div class="alert alert-warning alert-dismissible fade show" role="alert">
        <strong>Mengirim...</strong> Mohon tunggu sebentar.
      </div>
    `;

    fetch(scriptURL, { method: 'POST', body: new FormData(form) })
      .then(response => {
        if (response.ok) {
          // Alert sukses
          alertBox.innerHTML = `
            <div class="alert alert-success alert-dismissible fade show" role="alert">
              <strong>Berhasil!</strong> Data telah dikirim ke Google Sheet.
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          `;
          form.reset();
        } else {
          throw new Error('Gagal mengirim data.');
        }
      })
      .catch(error => {
        // Alert gagal
        alertBox.innerHTML = `
          <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>Gagal!</strong> Terjadi kesalahan: ${error.message}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        `;
      });
      // fetch(scriptURL, { method: 'POST', body: new FormData(form)})
      //   .then(response => console.log('Success!', response))
      //   .catch(error => console.error('Error!', error.message))
  });
  // Tambahkan efek dorong ke bawah saat hamburger diklik
    const navToggle = document.getElementById('navToggle');
    const navbar = document.getElementById('navbarNav');

    navbar.addEventListener('shown.bs.collapse', () => {
        document.body.classList.add('nav-open');
    });

    navbar.addEventListener('hidden.bs.collapse', () => {
        document.body.classList.remove('nav-open');
    });
</script>

<!-- JavaScript for Loader -->
<script>
  const loader = document.getElementById('loader');

  window.addEventListener('load', () => {
    // Delay sedikit biar animasinya sempat kelihatan
    setTimeout(() => {
      loader.classList.add('hidden');
    }, 1200);
  });

  window.addEventListener("scroll", function () {
        const navbar = document.querySelector(".navbar");
        if (window.scrollY > 50) {
            navbar.classList.add("scrolled");
        } else {
        navbar.classList.remove("scrolled");
        }
    });
</script>


<!-- Bootstrap JS (optional for dismissible alert) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>